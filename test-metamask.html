<!DOCTYPE html>
<html>
<head>
    <title>MetaMask Test</title>
    <script>
        async function testMetaMaskLogin() {
            const statusEl = document.getElementById('status');
            const addressEl = document.getElementById('address');
            
            try {
                statusEl.textContent = 'Testing MetaMask connection...';
                
                // Check if MetaMask is installed
                if (!window.ethereum) {
                    statusEl.textContent = 'Error: MetaMask is not installed';
                    return;
                }
                
                // Request accounts
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                const address = accounts[0];
                
                statusEl.textContent = 'Connected successfully!';
                addressEl.textContent = `Address: ${address}`;
                
                // Test signing
                const message = `Sign this message to authenticate with Fusion FC Game\n\nWallet: ${address}\nTimestamp: ${Date.now()}`;
                const signature = await window.ethereum.request({
                    method: 'personal_sign',
                    params: [message, address]
                });
                
                console.log('Signature:', signature);
                statusEl.textContent = 'Signed message successfully!';
                
            } catch (error) {
                statusEl.textContent = `Error: ${error.message}`;
                console.error(error);
            }
        }
    </script>
</head>
<body>
    <h1>MetaMask Connection Test</h1>
    <button onclick="testMetaMaskLogin()">Test MetaMask Login</button>
    <p id="status">Click the button to test MetaMask</p>
    <p id="address"></p>
</body>
</html>